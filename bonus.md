# bonus.md

## 1. 가상머신과 컨테이너의 차이

| 구분 | 가상머신(VM) | 컨테이너 |
| :-- | :-- | :-- |
| 가상화 방식 | 하이퍼바이저가 하드웨어 전체를 가상화 | 운영체제 커널을 공유하는 OS 수준 가상화 |
| 게스트 OS 포함 여부 | 각 VM마다 독립적인 게스트 OS 필요 | 게스트 OS 불필요, 호스트 커널 공유 |
| 리소스 사용량 | 수 GB 메모리, 수 GB 디스크 | 수 MB 메모리, 수 MB 디스크 |
| 부팅/시작 시간 | 수 분 | 수 초 |
| 격리 수준 | 하드웨어 수준의 강한 격리 | 프로세스·네임스페이스 기반 격리 |
| 배포 / 이식성 | 이미지 크기 큼, 이식성 낮음 | 이미지 레이어 재사용, 이식성 높음 |

> Docker 공식 문서 “What is a Container?”는 VM 대비 컨테이너의 경량성과 빠른 시작 시간을 강조한다.

## 2. 컨테이너와 이미지의 차이

| 항목 | Docker 이미지 | Docker 컨테이너 |
| :-- | :-- | :-- |
| 정의 | 애플리케이션·의존성·설정이 담긴 **읽기 전용** 템플릿 | 이미지 인스턴스가 메모리에서 **실행 중**인 상태 |
| 파일시스템 | 불변(immutable) 레이어 집합 | 읽기 전용 이미지 + 읽기/쓰기 레이어 |
| 생성 시점 | `docker build` 또는 `docker pull` | `docker run` 실행 시 동적으로 생성 |
| 저장 위치 | 로컬 디스크·레지스트리 | 호스트 OS 네임스페이스·cgroups 안 |
| 공유 가능성 | 동일 이미지 레이어를 여러 컨테이너가 공유 | 컨테이너는 고유 ID·상태를 가짐 |

## 3. 컨테이너 런타임 정의

컨테이너 런타임은 **이미지를 해석·언패킹**하여 네임스페이스와 cgroups로 격리된 **프로세스로 실행**하고, 실행 수명주기를 관리하는 소프트웨어 계층이다.

주요 기능

- 이미지 풀·언패킹
- 컨테이너 생성·시작·중지·삭제
- 리소스(CPU·메모리·I/O) 제어
- 네트워킹·스토리지 훅 처리
- OCI(Open Container Initiative) 규격 준수


## 4. CNCF Landscape 기준 컨테이너 런타임 3가지

| 런타임 | 특징 | CNCF 단계 |
| :-- | :-- | :-- |
| containerd | Docker에서 분리되어 독립 프로젝트로 발전, Kubernetes의 표준 CRI 구현 중 하나 | Graduated |
| CRI-O | Kubernetes 전용 경량 런타임, `runc`를 호출하여 OCI 컨테이너 실행 | Incubating |
| gVisor | 사용자 공간 커널로 추가 격리 계층 제공, 보안 강화 | Sandbox |

## 5. Docker 이미지의 레이어

Docker 이미지는 **UnionFS** 기반 다중 레이어 스택이다. 각 레이어는 **불변**이며 상위 레이어는 하위 레이어의 변경분만을 포함한다.

레이어 구조 장점

- **캐시 재사용**: 동일 레이어는 한 번만 다운로드·저장
- **증분 배포**: 변경 레이어만 전송 → 빌드·배포 속도 향상
- **불변성**: 과거 레이어가 변하지 않아 빌드 재현성 보장

예시

```
FROM alpine:3.20        # 베이스 레이어
RUN apk add --no-cache curl   # 변경 레이어 1
COPY app /usr/src/app          # 변경 레이어 2
```

`docker history`로 각 레이어와 크기·생성 명령을 확인할 수 있다.
